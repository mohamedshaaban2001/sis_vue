import{importShared as c}from"./__federation_fn_import-BlNMw6p9.js";import{useToastStore as a}from"./__federation_expose_ToastStore-YykOszo6.js";const l=await c("axios"),s=l.create({baseURL:"https://www.hospitals.mil/",headers:{Accept:"application/json"}});s.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));s.interceptors.response.use(e=>{if(e.status===401||e.data?.StatusCode===401||e.data?.status===401){const t=a();return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",t.error({title:"Unauthorized",message:"Your session has expired. Please login again"}),Promise.reject(new Error("Unauthorized"))}return e.config.method!=="get"&&(e.config.headers?.disableToast||a().success({title:"Success",message:e.data.returnMessage})),e},async e=>{const t=e.response?e.response.status:null,o=a(),r=localStorage.getItem("accessToken"),i=!r||r==="null"||r==="undefined",n=e.code==="ERR_NETWORK"||e.message==="Network Error";return t===401||n&&i?(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",o.error({title:"Unauthorized",message:"Your session has expired. Please login again"}),Promise.reject(e)):(t===403?(o.error({title:"Forbidden",message:"You are not authorized to perform this action"}),console.log("Forbidden access")):t===404?(console.error("Not Found"),o.warning({title:"Not Found",message:"The request you are looking for could not be found"}),console.log("Post not found")):n?(o.error({title:"Network Error",message:"Unable to connect to the server. Please check your internet connection."}),console.error("Network error occurred:",e)):e.response?.data?.message?(o.error({title:"حدث خطأ",message:e.response.data.message}),console.error("An error occurred:",e)):(o.error({title:"حدث خطأ",message:"An unexpected error occurred"}),console.error("An error occurred:",e)),Promise.reject(e))});function g(e,t={}){return s.get(e,t)}function m(e,t={},o=!0){const r={...t.headers,disableToast:!o};return s.post(e,t,{headers:r})}function h(e,t={},o=!0){const r={...t.headers,disableToast:!o};return s.put(e,t,{headers:r})}function f(e,t={},o=!0){const r={...t.headers,disableToast:!o};return s.delete(e,t,{headers:r})}export{f as apiDelete,g as apiGet,m as apiPost,h as apiPut};
