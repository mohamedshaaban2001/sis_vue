import{importShared as l}from"./__federation_fn_import-BlNMw6p9.js";import o from"./__federation_expose_Config-BvENg_gr.js";const{defineStore:a}=await l("pinia"),n={photoURL:"",status:"متصل",EMP_SERIAL:"",name:"",Role:"",id:"0",token:"0",SIGN:"",SIGNOTEC:"",FULL_EMP_N:"",CONTROLS:"",PROFILE_PIC:"",PAGES_TREE:"{}",PAGES:[],ROLES:[],CIV_ID_CARD_NO:"",MODULES:[1,2,3,4]},d=a("root",{state:()=>({AppActiveUser:JSON.parse(localStorage.getItem("userInfo"))||n,sidebarCollapsed:JSON.parse(localStorage.getItem("sidebarCollapsed"))||!1,pageList:JSON.parse(localStorage.getItem("pageList"))||[]}),actions:{flattenPageList(e,t){let i=[];return t.forEach(s=>{const r=e?e+" > "+s.Title:s.Title;i.push({...s,Title:r,Href:s.Children.length>0?null:s.Href}),s.Children&&s.Children.length>0&&(i=i.concat(this.flattenPageList(r,s.Children)))}),console.log(i),i},UPDATE_USER_INFO(e){this.AppActiveUser=JSON.parse(JSON.stringify(e)),this.pageList=this.flattenPageList(null,JSON.parse(this.AppActiveUser.PAGES_TREE)),this.AppActiveUser.MODULES=JSON.parse(this.AppActiveUser.PAGES_TREE).map(t=>({name:t.Title,id:t.ModuleNo,path:t.Children[0]?.Href||""})),localStorage.setItem("userInfo",JSON.stringify(this.AppActiveUser)),localStorage.setItem("pageList",JSON.stringify(this.pageList))},toggleSidebarCollapse(){this.sidebarCollapsed=!this.sidebarCollapsed,localStorage.setItem("sidebarCollapsed",JSON.stringify(this.sidebarCollapsed))},setSidebarCollapse(e){this.sidebarCollapsed=e,localStorage.setItem("sidebarCollapsed",JSON.stringify(this.sidebarCollapsed))},gotoModule(e){window.location.href=e}},getters:{config:()=>o,moduleRoutes:e=>e.AppActiveUser.PAGES_TREE!="{}"?JSON.parse(e.AppActiveUser.PAGES_TREE).map(t=>({name:t.Title,id:t.ModuleNo,path:t.Children[0]?.Href||""})):[]}});export{d as useStore};
